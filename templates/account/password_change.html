{% extends "account/base.html" %}
{% load i18n %}

{% block auth_subtitle %}Change your password{% endblock %}

{% block auth_content %}
<div class="text-center mb-4">
    <div class="auth-icon mb-3">
        <i class="fas fa-shield-alt text-primary" style="font-size: 2.5rem;"></i>
    </div>
    <p class="text-muted">
        Please enter your old password followed by your new password twice.
    </p>
</div>

<form class="auth-form" method="POST" action="{% url 'account_change_password' %}">
    {% csrf_token %}

    {% if form.non_field_errors %}
    <div class="alert alert-auth alert-error">
        {% for error in form.non_field_errors %}
        <div>{{ error }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Old Password Field -->
    <div class="mb-3">
        <label for="{{ form.oldpassword.id_for_label }}" class="form-label">
            <i class="fas fa-lock me-2"></i>Current Password
        </label>
        <input type="password" class="form-control {% if form.oldpassword.errors %}is-invalid{% endif %}"
            id="{{ form.oldpassword.id_for_label }}" name="{{ form.oldpassword.name }}"
            placeholder="Enter your current password" required>
        {% if form.oldpassword.errors %}
        <div class="invalid-feedback">
            {% for error in form.oldpassword.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- New Password Field -->
    <div class="mb-3">
        <label for="{{ form.password1.id_for_label }}" class="form-label">
            <i class="fas fa-key me-2"></i>New Password
        </label>
        <input type="password" class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
            id="{{ form.password1.id_for_label }}" name="{{ form.password1.name }}"
            placeholder="Enter your new password" required>
        {% if form.password1.errors %}
        <div class="invalid-feedback">
            {% for error in form.password1.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- Confirm New Password Field -->
    <div class="mb-3">
        <label for="{{ form.password2.id_for_label }}" class="form-label">
            <i class="fas fa-key me-2"></i>Confirm New Password
        </label>
        <input type="password" class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
            id="{{ form.password2.id_for_label }}" name="{{ form.password2.name }}"
            placeholder="Confirm your new password" required>
        {% if form.password2.errors %}
        <div class="invalid-feedback">
            {% for error in form.password2.errors %}
            {{ error }}
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- Change Password Button -->
    <div class="d-grid mb-4">
        <button class="btn btn-primary btn-auth" type="submit">
            <i class="fas fa-check me-2"></i>Change Password
        </button>
    </div>
</form>

<!-- Back Links -->
<div class="text-center">
    <a href="{% url 'core:web_index' %}" class="auth-link">
        <i class="fas fa-arrow-left me-1"></i>Cancel and go back
    </a>
</div>
{% endblock %}